ΕΙΣΑΓΩΓΗ ΣΤΟΝ ΠΡΟΓΡΑΜΜΑΤΙΣΜΟ (2022-23)

Εργασία 4

Το πρόβλημα που καλείσθε να αντιμετωπίσετε στην άσκηση αυτή είναι η συμπλήρωση σταυρολέξων.
Δεδομένα του προβλήματος είναι ένα κενό σταυρόλεξο, δηλαδή οι διαστάσεις του και οι θέσεις των
μαύρων τετραγωνιδίων του, και ένα λεξικό που περιέχει ένα μεγάλο αριθμό λέξεων.

Το πρόβλημα
Το ζητούμενο είναι να γράψετε ένα πρόγραμμα C, το οποίο να είναι σε θέση να επιλέξει λέξεις από
το λεξικό για να συμπληρωθεί το σταυρόλεξο, έτσι ώστε να ισχύει ο γνωστός και προϕανής κανόνας
των σταυρολέξων, που είναι ότι εκεί που διασταυρώνονται οριζόντιες και κάθετες λέξεις πρέπει να
υπάρχει το ίδιο γράμμα. Επίσης, επισημαίνεται ότι όπου υπάρχουν απομονωμένα γράμματα, δηλαδή
ένα γράμμα μεταξύ δύο μαύρων τετραγωνιδίων, αυτά δεν θεωρούνται λέξεις.
Τα δεδομένα του προβλήματος
Το αρχείο http://www.di.uoa.gr/~ip/hwfiles/crossw/Words.txt, στο οποίο περιέχεται μία
λέξη σε κάθε γραμμή, μπορεί να χρησιμοποιηθεί σαν λεξικό. Το συγκεκριμένο αρχείο είναι ταξινομημένο αλϕαβητικά, αλλά το πρόγραμμα που θα γράψετε δεν πρέπει να βασίζεται σ΄ αυτό το
γεγονός. Θα πρέπει να είναι σε θέση να λειτουργήσει σωστά ακόμα και για λεξικά που δεν είναι ταξινομημένα αλϕαβητικά. Στον κατάλογο http://www.di.uoa.gr/~ip/hwfiles/crossw βρίσκονται
και άλλα λεξικά, με διαϕορετικά πλήθη λέξεων, που μπορείτε να χρησιμοποιήσετε. Ενδεικτικά κενά
σταυρόλεξα για να ελέγξετε την ορθότητα και αποδοτικότητα του προγράμματός σας είναι τα αρχεία Crossword1.txt, Crossword2.txt, Crossword3.txt, Crossword4.txt και Crossword5.txt,
στον κατάλογο http://www.di.uoa.gr/~ip/hwfiles/crossw. Στα αρχεία αυτά, περιγράϕονται με
κάποιο τρόπο που θα εξηγηθεί στη συνέχεια τετράγωνα σταυρόλεξα, δηλαδή με ίδιο πλάτος και ύψος.
Το πρόγραμμα που θα γράψετε να χειρίζεται και αυτό μόνο τετράγωνα σταυρόλεξα. Η δομή ενός
αρχείου σταυρολέξου είναι η εξής: Στην πρώτη γραμμή υπάρχει η διάσταση του σταυρολέξου και,
στη συνέχεια, κάθε γραμμή αντιστοιχεί σε ένα μαύρο τετραγωνίδιο του σταυρολέξου, δίνοντας τις
συντεταγμένες του, δηλαδή τον αύξοντα αριθμό της γραμμής και της στήλης στις οποίες βρίσκεται
(οι γραμμές και οι στήλες αριθμούνται από το 1). Τα πέντε αρχεία σταυρολέξων που προτείνεται να
αντιγράψετε αντιστοιχούν στα σταυρόλεξα που ϕαίνονται στην τελευταία σελίδα της εκϕώνησης. Για
να καταλάβετε καλύτερα τη μορϕή των αρχείων αυτών, δείτε παρακάτω τα περιεχόμενα του πρώτου
απ΄ αυτά, που αντιστοιχεί στο σταυρόλεξο (1) της τελευταίας σελίδας.
$ cat Crossword1.txt
5
1 1
1 2
2 1
4 5
5 4
5 5

Λεξικά και επιλογή -dict
΄Εστω ότι το εκτελέσιμο πρόγραμμα που θα δημιουργήσετε έχει το όνομα “crossw”. Η πιο απλή
χρήση του προγράμματος είναι να κληθεί με ένα όρισμα, το όνομα του αρχείου σταυρολέξου που
πρέπει να συμπληρωθεί. Στην περίπτωση αυτή, σαν λεξικό πρέπει να χρησιμοποιηθεί ένα αρχείο με
όνομα Words.txt που πρέπει να βρίσκεται στον τρέχοντα κατάλογο. Αν αντί γι΄ αυτό θέλουμε να
χρησιμοποιηθεί άλλο αρχείο λεξικού, θα πρέπει το πρόγραμμα να κληθεί και με την επιλογή -dict
<dictionaryfile>, αλλά το πρώτο όρισμα κατά την κλήση πρέπει να είναι πάλι το αρχείο του σταυρολέξου. Το αποτέλεσμα του προγράμματος πρέπει να είναι οι επιλεγμένες λέξεις από το λεξικό που
το συμπληρώνουν, οι οποίες πρέπει να εκτυπωθούν στην έξοδο, πρώτα οι οριζόντιες με τη σειρά που
εμϕανίζονται στις γραμμές, και μετά οι κάθετες, με τη σειρά που εμϕανίζονται στις στήλες. Υπενθυμίζεται ότι στα σταυρόλεξα δεν νοούνται λέξεις του ενός γράμματος. Παραδείγματα εκτέλεσης:
$ ./crossw Crossword1.txt
sst
whee
zaire
anna
pee
zap
wane
shine
sera
tee
$
$ ./crossw Crossword2.txt -dict MoreWords.txt
wet
torus
forages
york
step
err
tau
step
elms
enemies
tears
poe
yes
forte
torrent
work
peep
era
mao
tugs
eire
settles
seams
pus
$

΄Ελεγχος ορθότητας και επιλογή -check
Το πρόγραμμά σας να είναι σε θέση να αναγνωρίζει και την επιλογή -check. Στην περίπτωση της
επιλογής αυτής, να διαβάζει από την πρότυπη είσοδο (stdin) ένα σύνολο από λέξεις, μία σε κάθε
γραμμή, όπως ακριβώς εκτυπώνονται σαν λύση ενός προβλήματος συμπλήρωσης σταυρολέξου από το
ίδιο το πρόγραμμα, και, δεδομένου ενός αρχείου σταυρολέξου, που έχει δοθεί σαν πρώτο όρισμα, και
ενός αρχείου λεξικού, είτε του ./Words.txt, είτε κάποιου που έχει δοθεί μέσω της επιλογής -dict,
να ελέγχει αν το σύνολο από λέξεις είναι ορθή λύση για να συμπληρωθεί το σταυρόλεξο. Ανάλογα
με το αποτέλεσμα του ελέγχου, να εκτυπώνεται κατάλληλο διαγνωστικό μήνυμα, αν έχει προκύψει
κάποιο λάθος, ή να μην εκτυπώνεται τίποτα, αν το σταυρόλεξο συμπληρώνεται επιτυχώς με τις λέξεις
που δόθηκαν στην είσοδο. Το πρόγραμμά σας πρέπει να δοκιμάζει να τοποθετήσει τις λέξεις κατά
σειρά που έχουν δοθεί στο σταυρόλεξο και αν η λύση δεν είναι ορθή, στο πρώτο πρόβλημα που θα
συναντήσει να τερματίζει, εκτυπώνοντας και το σχετικό μήνυμα λάθους. Πιθανοί λόγοι για τους
οποίους μία λύση δεν είναι σωστή είναι:
• Η λέξη που πρέπει να τοποθετηθεί δεν περιέχεται στο λεξικό.
• Η λέξη που πρέπει να τοποθετηθεί δεν ταιριάζει, είτε επειδή έχει διαϕορετικό μέγεθος από αυτό
της θέσης που πρέπει να μπει, είτε επειδή κάποιο από τα ήδη τοποθετημένα γράμματα στη θέση
δεν είναι το ίδιο με το αντίστοιχο γράμμα της λέξης.
• Οι λέξεις που δόθηκαν έχουν τοποθετηθεί επιτυχώς, αλλά το σταυρόλεξο δεν έχει συμπληρωθεί
μέχρι τέλους.
• Το σταυρόλεξο συμπληρώθηκε σωστά, αλλά έχουν δοθεί περισσότερες λέξεις από όσες τελικά
χρειαζόντουσαν.
Παραδείγματα εκτέλεσης του προγράμματος με την επιλογή -check είναι τα εξής:
$ ./crossw Crossword2.txt -check
run
bload
Word "bload" not in dictionary
$
$ ./crossw Crossword1.txt -check -dict MoreWords.txt
the
gear
ares
Word "ares" cannot be placed
$
$ ./crossw Crossword1.txt | head -9 | ./crossw Crossword1.txt -check
Not enough words
$
$ (./crossw Crossword2.txt ; echo more) | ./crossw Crossword2.txt -check
More words than needed
$
$ ./crossw Crossword3.txt -dict EvenMoreWords.txt | \
./crossw Crossword3.txt -dict EvenMoreWords.txt -check
$

Γραϕική αναπαράσταση αποτελέσματος και επιλογή -draw
Τέλος, το πρόγραμμά σας να είναι σε θέση να αναγνωρίζει και την επιλογή -draw. ΄Οταν δίνεται η
επιλογή αυτή, να εκτυπώνεται στην έξοδο η λύση του προβλήματος με κάποιον παραστατικό τρόπο
της επιλογής σας. Η εκτύπωση αυτής της μορϕής να γίνεται και στην περίπτωση που έχει δοθεί και
η επιλογή -check, μόνο όταν η λύση που δόθηκε είναι σωστή. Πιθανά παραδείγματα εκτέλεσης και
με την επιλογή αυτή ϕαίνονται στη συνέχεια.
$ ./crossw Crossword1.txt -draw
###### s s t
### w h e e
z a i r e
a n n a ###
p e e ######
$
$ ./crossw Crossword2.txt -draw -dict MoreWords.txt
######### w e t #########
###### t o r u s ######
### f o r a g e s ###
y o r k ### s t e p
e r r ######### t a u
s t e p ### e l m s
### e n e m i e s ###
###### t e a r s ######
######### p o e #########
$
$ ./crossw Crossword3.txt -dict MoreWords.txt -draw
l o g s ### p r o ### v i s a
i d l e ### a i d ### a r i d
n o u n ### t o o ### l i n d
t r e a t s ### r o u s e s
######### t o y ### s u e #########
y e m e n ######### t r u s t
e r a ##################### s u e
s a t e s ######### s t e e n
######### s u s ### s u e #########
g o t t e n ### h e r p e s
e r i e ### o r r ### r o w e
m a n e ### r u e ### o p e n
s l a m ### t e d ### r e n t
$
$ ./crossw Crossword4.txt | ./crossw Crossword4.txt -check -draw
t a b u ### s c m ### a m r a
e b e n ### e r e ### c a i n
c l a d ### t a d ### c l o d
h e t e r o g e n e i t y
######### r a n ### a i l #########
e r e c t ######### b e s e t
s i a l ############### r a n t
t o t a l ######### s o g g y
######### s e a ### t i m #########
m a s s a c h u s e t t s
o v u m ### t o p ### t a r t
d i r e ### o w l ### e r i e
e v e n ### n e e ### r a m p
$
$ ./crossw Crossword5.txt -dict Words.txt -draw
### v ### s ### o ### l ### t h a l i a ### p a r ###
z i m m e r m a n ### e ### u ### u g a n d a
### s ### o ### d ### g ### g i l c h r i s t ### s
l i t t l e t o n ### n ### r a i n c o a t
### g ### h ### r o s e n z w e i g ### a n n e
y o k e l ### r ### v ######### t r a w l ### i r
### t ### r ### s u r e t y ### i ############### s ###
w h o ### w i s e ### o ### m a t u r a t e ###
i ### m o r t ### a s t o r ### o ### o u r ### t
s ### n ### o ### m p h ###### s c r o o g e ### w
e p i c u r e ### a s h ### r e n t ### a w e
a ### p ### g ### s t r i a t e ### u ### s t a n
c l o t h ### m ### i n l e t ### s c h i s t
r ### t ### t h e m ### u p s e t ###### a s ### y
e b e n ###### r u s s e t ### a ### g w e n ###
### a n n ### v i c t o r ### a c r e ###### i ###
o t t e r ### c h a i n ### z i o n i s m ###
g ######### u ######### n d ### u t t e r ### p b s
r i v u l e t ### z a i r e ###### e m i l e
e ### t ### e ### a v a l a n c h e ### s t e w
$
$ ./crossw Crossword5.txt -dict EvenMoreWords.txt | \
./crossw Crossword5.txt -draw -dict EvenMoreWords.txt -check
### y ### z ### t ### w ### q u e s t s ### a g o ###
s o p o r i f i c ### s ### p ### l i n i n g
### u ### n ### b ### z ### v a c a t i o n s ### i
u n r a v e l e r ### g ### c o e n a m o r
### g ### t ### t o n o m e t e r s ### l o u t
y e s e s ### b ### w ######### m y t h s ### n h
### s ### d ### t a v e r n ### a ############### c ###
s t u ### y u r i ### y ### i n t i t u l e ###
w ### n o o n ### s t e e l ### r ### r s a ### t
i ### w ### u ### w a y ###### l a o t i a n ### s
s w e l t e r ### p b s ### s w o t ### d y e
h ### i ### h ### e v e r e t t ### y ### t s e t
i n g l e ### s ### s o c i o ### s k e i n s
e ### h ### s m t p ### w r e n s ###### r d ### e
r e t s ###### l i m n e r ### t ### b y e s ###
### t e e ### r e c a s t ### h u r l ###### o ###
f a d e r ### s a c h s ### o n e i r i c ###
o ######### u ######### a i ### g u s t s ### g o p
u l y s s e s ### w r i e r ###### s t o l e
r ### r ### t ### c y s t a m i n e ### i r a n
$
$ ./crossw Empty6.txt -dict EvenMoreWords.txt -draw
a s s e s s
s t e l a e
s e n i l e
e l i c i t
s a l i s h
s e e t h e
$
$ ./crossw Empty7.txt -dict EvenMoreWords.txt -draw
s a r p s i s
a b a l o n e
r a d i a t e
p l i n k e d
s o a k a g e
i n t e g e r
s e e d e r s
$

Προσέγγιση του προβλήματος
Το πρόβλημα που παρουσιάζεται στην άσκηση αυτή είναι ένα πρόβλημα αναζήτησης. Βρισκόμαστε,
δηλαδή, σε μία αρχική κατάσταση, το άδειο σταυρόλεξο, και ο στόχος είναι, επιλέγοντας λέξεις από το
λεξικό, σταδιακά να το συμπληρώσουμε, περνώντας από ενδιάμεσες καταστάσεις μερικώς συμπληρωμένων σταυρολέξων. Κατά τη διαδικασία συμπλήρωσης του σταυρολέξου, είναι πιθανόν κάποια στιγμή
να βρεθούμε σε αδιέξοδο. Δηλαδή, να θέλουμε να συμπληρώσουμε μία λέξη σ΄ αυτό, αλλά να μην
υπάρχει κάποια κατάλληλη μέσα στο λεξικό, που να ταιριάζει και με τα ήδη τοποθετημένα γράμματα
από άλλες διασταυρούμενες με αυτήν λέξεις. Τότε, ένας τρόπος για να ανακάμψουμε είναι να οπισθοδρομήσουμε στην πιο πρόσϕατη επιλογή που είχαμε κάνει, να την αναιρέσουμε και να ακολουθήσουμε
κάποια άλλη. Για την υλοποίηση αυτής της οπισθοδρόμησης χρειαζόμαστε μία στοίβα, στην οποία
να κρατάμε την αλληλουχία των βημάτων που έχουμε κάνει, ή κάτι ισοδύναμο. Εναλλακτικά, για
να προσομοιώσουμε την οπισθοδρόμηση, μπορούμε να χρησιμοποιήσουμε και αναδρομή. Μπορούμε,
βέβαια, αν βρεθούμε σε αδιέξοδο, να μην κάνουμε καθόλου οπισθοδρόμηση, αλλά να αναιρέσουμε
κάποιες “ενοχλητικές” τοποθετήσεις λέξεων που είχαμε κάνει στο παρελθόν και να συνεχίσουμε
ευελπιστώντας ότι όλα θα πάνε καλά τώρα. Αν ξαναβρεθούμε σε αδιέξοδο, προσπαθούμε πάλι να
επιδιορθώσουμε την κατάσταση στην οποία βρισκόμαστε, ώστε να μπορέσουμε να συνεχίσουμε.
Ουσιαστικά, για να μπορεί το πρόγραμμα που θα γράψετε να συμπληρώνει και μεγάλα σταυρόλεξα,
θα πρέπει όταν είναι να πάρει κάποια απόϕαση να το κάνει με έξυπνο τρόπο. Για παράδειγμα, ίσως σας
είναι προϕανές ότι είναι καλύτερο να ξεκινήσει κανείς να συμπληρώνει το σταυρόλεξο με τις μεγαλύτερες λέξεις πρώτα και μετά να προχωρά στις μικρότερες. Επίσης, ίσως θα πρέπει να συμπληρώνονται
εναλλάξ οριζόντιες και κάθετες λέξεις, και μάλιστα με έναν τρόπο ώστε να εκμεταλλευόμαστε όσο
νωρίτερα γίνεται τις διασταυρώσεις λέξεων. Πιθανότατα θα χρειαστεί επίσης να οργανώσετε το λεξικό
σας με κάποιο τρόπο ώστε να είναι αποδοτική η αναζήτηση λέξεων που πληρούν κάποιες ιδιότητες.
Αν δοκιμάσετε το πρόγραμμά σας και με άλλα σταυρόλεξα επιτυχώς, στο παραδοτέο σας να συμπεριλάβετε και τα αρχεία αυτών των σταυρολέξων.

Παραδοτέο
Θα πρέπει να δομήσετε το πρόγραμμά σας σε ένα σύνολο από τουλάχιστον τρία πηγαία αρχεία
C (με κατάληξη .c) και τουλάχιστον δύο αρχεία επικεϕαλίδας (με κατάληξη .h). Επίσης,
δημιουργήστε ένα απλό αρχείο κειμένου με όνομα README.txt, στο οποίο να δίνετε οδηγίες για τη
μεταγλώττιση του προγράμματος, καθώς και ό,τι άλλο κρίνετε σκόπιμο να επισημάνετε. Προαιρετικά,
μπορείτε να παραδώσετε και ένα αρχείο Makefile που να αναλαμβάνει όλη τη διαδικασία της κατασκευής του τελικού εκτελέσιμου μέσω της εντολής “make” (δώστε “man make” για περισσότερες
λεπτομέρειες).
Για να παραδώσετε το σύνολο των αρχείων που θα έχετε δημιουργήσει για την εργασία αυτή,
ακολουθήστε την εξής διαδικασία. Τοποθετήστε όλα τα αρχεία μέσα σ΄ ένα κατάλογο που θα δημιουργήσετε σε κάποιο σύστημα Linux, έστω με όνομα crossw. ΄Οντας στον κατάλογο που περιέχει
τον κατάλογο crossw, δημιουργήστε ένα επιπεδοποιημένο tar αρχείο (έστω με όνομα crossw.tar)
που περιέχει τον κατάλογο crossw και όλα του τα περιεχόμενα. Αυτό γίνεται με την εντολή “tar
cvf crossw.tar crossw”.
1 Συμπιέστε το αρχείο crossw.tar, ώστε να δημιουργηθεί το αρχείο
crossw.tar.gz. Αυτό γίνεται με την εντολή “gzip crossw.tar”.
2 Το αρχείο crossw.tar.gz
είναι που θα πρέπει να υποβάλετε μέσω του eclass.